<div class="profile-section section">
    <h2 class="profile-title">
        <i class="fa-solid fa-user"></i> Mi Perfil
    </h2>
    <!-- === TARJETA DE INFORMACIÓN DEL USUARIO === -->
    <div class="profile-card">
        <p><strong>Nombre:</strong> <%= usuario.name %></p>
        <p><strong>Correo:</strong> <%= usuario.mail %></p>
        <a href="/user/logout" class="logout-btn">Cerrar sesión</a>
    </div>
    <h2 class="profile-subtitle">Mis Reservas</h2>
    <!-- === CONTENEDOR PARA LAS 3 COLUMNAS DE RESERVAS === -->
    <div class="reservas-grid">
        <!-- ==========================
            1. PENDIENTES DE PAGO
        =========================== -->
        <div class="reserva-columna">
            <h3 class="columna-titulo pendiente">Pendientes de Pago</h3>
            <% if (pendientes.length === 0) { %>
                <p class="no-reservas">No tienes reservas pendientes.</p>
            <% } %>
            <% pendientes.forEach(res => { %>
                <div class="reserva-card">
                    <p><strong>Numero de reserva:</strong> <%= res.idreserva %></p>
                    <p><strong>Id habitacion:</strong> <%= res.idhabitacion %></p>
                    <p><strong>Entrada:</strong> <%= res.fechaEntrada %></p>
                    <p><strong>Salida:</strong> <%= res.fechaSalida %></p>
                    <p><strong>Precio:</strong> $<%= res.Habitacion.precio %></p>
                    <form action="/bookings/cancel/<%= res.idreserva %>" method="POST">
                        <button class="btn-cancelar">Cancelar</button>
                    </form>
                    <hr>
                    <form action="/bookings/pagar/<%= res.idreserva %>" method="POST">
                        <button class="btn-cancelar">Pagar</button>
                    </form>
                    <hr>
                </div>
            <% }) %>
        </div>
        <!-- ==========================
            2. RESERVAS PAGADAS (PRÓXIMAS)
        =========================== -->
        <div class="reserva-columna">
            <h3 class="columna-titulo pagadas">Pagadas / Próximas</h3>
            <% if (pagadas.length === 0) { %>
                <p class="no-reservas">Aún no tienes reservas pagadas.</p>
            <% } else { %>
                <% pagadas.forEach(res => { %>
                    <div class="reserva-item">
                        <h4><%= res.tipo %> - Habitación <%= res.idhabitacion %></h4>
                        <p><strong>Fecha:</strong> <%= res.fechaEntrada %></p>
                        <p><strong>Precio:</strong> $<%= res.Habitacion.precio %></p>
                        <p><strong>Estado:</strong> <%= res.estado %></p>
                        <hr>
                    </div>
                <% }) %>
            <% } %>
        </div>
        <!-- ==========================
            3. RESERVAS PASADAS
        =========================== -->
        <div class="reserva-columna">
            <h3 class="columna-titulo pasadas">Historial</h3>
        
            <% if (historial.length === 0) { %>
                <p class="no-reservas">Aún no tienes reservas pasadas.</p>
            <% } else { %>
                <% historial.forEach(res => { %>
                    <div class="reserva-item">
                        <p><strong>- Habitación <%= res.Habitacion.idhabitacion %></strong></p>
                        <p><strong>Fecha:</strong> <%= res.fechaEntrada %></p>
                        <p><strong>Precio:</strong> $<%= res.Habitacion.precio %></p>
                        <p><strong>Estado:</strong> <%= res.estado %></p>
                        <hr>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </div>
</div>

